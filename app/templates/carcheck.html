
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">

    <title>DealWheels</title>

    <link rel="stylesheet" href="/static/css/font-awesome.css">

    <!-- Bootstrap core CSS -->
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">

    <!-- jQuery for dataTables -->
    <link rel="stylesheet" type="text/css" href="//cdn.datatables.net/1.10.10/css/jquery.dataTables.css">

    <!-- Custom styles for this template -->
    <link href="/static/css/output.css" rel="stylesheet">

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="/static/js/ie-emulation-modes-warning.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>

    <div class="site-wrapper">

      <div class="site-wrapper-inner">

        <div class="cover-container">
          <div class="masthead clearfix">
            <div class="inner">
              <h3 class="masthead-brand font-head">
                <a href="{{ url_for('index') }}"><i class="fa fa-car"></i> DealWheels</a></h3>
              <nav>
                <ul class="nav masthead-nav">
                  <!-- <li><a href="{{ url_for('carcheck') }}">Check Car</a></li> -->
                  <li class="active"><a href="{{ url_for('index') }}"><i class="fa fa-home fa-2x"></i></a></li>

                  <li><a href="https://github.com/ayfu/usedcarfinder">
                    <i class="fa fa-github fa-2x"></i></a></li>
                  <li><a href="https://www.linkedin.com/in/afu01">
                    <i class="fa fa-linkedin fa-2x"></i></a></li>

                </ul>
              </nav>
            </div>
          </div>

          <div class="inner">
              <p><br><br><br></p>
               <!-- <h2 class="cover-heading"><div {%if gooddeal == 1%}style="color:#347C2C"{% else %}class="baddeal"{% endif %}>{{suggestion}}</div></h2> -->
               <!-- <p><div {%if gooddeal == 1%}style="color:#347C2C"{% else %}class="baddeal"{% endif %}>This deal is in the top {{dealquality}}% of deals analyzed for {{site}}</div></p> -->

              <!-- <p></p> -->
              <!-- PLOT -->
              <p><i class="fa fa-car fa-2x" style="color:{{color}}"></i><font style="color:{{color}}; font-size: 150%; font-family: "Trebuchet MS", Verdana, sans-serif;"> &nbsp;&nbsp;{{suggestion2}} {{pct}} {{suggestion1}}</font></p>
              <div class="center-table" style="width:70%">
                <div id="plot"></div>
              </div>


            <div style = "margin-top:17%">
             <table border="0" style="width:50%;" class='center-table consistent-font'>
              <tr style="font-weight:bold">
                <td>Model</td>
                <td>Year</td>
                <td>Mileage</td>
                <td>Listed Price</td>
                <td>DealWheels Price</td>
                <td>Savings</td>
             </tr>
              <tr>
                <td>{{entries['model'].title()}}</td>
                <td>{{entries['year']}}</td>
                <td>{{entries['odometer']}}</td>
                <td>{{entries['price']}}</td>
                <td>{{entries['prediction']}}</td>
                <!-- <td {%if gooddeal == 1%}style="color:#347C2C"{% else %}class="baddeal"{% endif %}>{{entries['deal']}}</td> -->
                <td style = "color:{{color}}">{{entries['deal'][:-2]}}</td>
              </tr>

          </table>
         </div>
         <!-- </div> -->
         <p><br></p>
         <button class = "btntbl consistent-font">See other <i class="fa fa-car"></i> deals</button>
          <p><br></p>

          <form align="center" action="/carcheck" method="POST">
              <!-- width style also taken care of in cover.css file for the "input[type=text]" section" -->
             <input type="text" class = "consistent-font" name="urlcall" style="width: 50%;" value={{url}}>
             <button type="submit" class="btn btn-lg btn-default"><i class="fa fa-search"></i></button>
             <!-- <p class="body"><font size = "2">Car Choices: Honda Civic, Toyota Corolla, Ford Focus, Chevy Cruze, Hyundai Elantra, Mazda 3, Kia Forte </font></p> -->

             <!-- <input type="submit" name="my-form" > -->
         </form>

          <!-- <div class="center-table" style="width:80%"> -->
          <!-- <table id="table_id" class="display" border = "0"> -->
          <p><br></p>
          <table class="sortable center-table expandtbl1 consistent-font" border="0" style="width:50%;">
           <!-- <thead> -->
              <tr style="font-weight:bold">
                  <td>Model</td>
                  <td>Year</td>
                  <td>Mileage</td>
                  <td>Listed Price</td>
                  <td>DealWheels Price</td>
                  <td>Savings</td>
                  <td>Link</td>
              </tr>
          <!-- </thead> -->
          <!-- <tbody class = "expandtbl1"> -->
              {% for df in rec %}
              <tr>
                  <td>{{df['model'].title()}}</td>
                  <td>{{df['year']}}</td>
                  <td>{{df['odometer']}}</td>
                  <td>{{df['price']}}</td>
                  <td>{{df['prediction']}}</td>
                  <td style="color:#72B095">{{df['deal']}}</td>
                  <td><a href = {{df['url']}} style="color:blue;">link</a></td>
              </tr>
              {% endfor %}
         <!-- </tbody> -->
        </table>
    <!-- </div> -->
            <p><br></p>


          </div>

          <!--div class="mastfoot">
            <div class="inner">
              <p>Website designed using <a href="http://flask.pocoo.org/">Flask</a> and <a href="http://getbootstrap.com">Bootstrap</a>.</p>
            </div>
          </div-->

        </div>

      </div>

    </div>


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="/static/js/collapsetable.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <!-- Sort table -->
    <script src="/static/js/sorttable.js"></script>
    <!-- Highcharts -->
    <script src="http://code.highcharts.com/highcharts.js"></script>
    <!-- jQuery datatables -->
    <script type="text/javascript" charset="utf8" src="//cdn.datatables.net/1.10.10/js/jquery.dataTables.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="/static/js/ie10-viewport-bug-workaround.js"></script>

    <script language="javascript">
    (function (H) {
        function symbolWrap(proceed, symbol, x, y, w, h, options) {
            if (symbol.indexOf('text:') === 0) {
                var text = symbol.split(':')[1],
                    svgElem = this.text(text, x, y + h)
                    .css({
                        fontFamily: 'FontAwesome',
                        fontSize: h * 2
                    });

                if (svgElem.renderer.isVML) {
                    svgElem.fillSetter = function (value, key, element) {
                        element.style.color = H.Color(value).get('rgb');
                    };
                }
                return svgElem;
            }
            return proceed.apply(this, [].slice.call(arguments, 1));
        }
        H.wrap(H.SVGRenderer.prototype, 'symbol', symbolWrap);
        if (H.VMLRenderer) {
            H.wrap(H.VMLRenderer.prototype, 'symbol', symbolWrap);
        }

        // Load the font for SVG files also
        H.wrap(H.Chart.prototype, 'getSVG', function (proceed) {
            var svg = proceed.call(this);
            svg = '<?xml-stylesheet type="text/css" ' +
                'href="http://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" ?>' +
                svg;
            return svg;
        });
    }(Highcharts));

    $(function () {
        Highcharts.setOptions({
    		lang: {
    			thousandsSep: ','
    		}
       });
    $('#plot').highcharts({
        chart: {
            type: 'bar'
        },
        title: {
            text: '',
            style: {
                color: "{{color}}",
                fontSize: "25px",
                font: '25pt Trebuchet MS, Verdana, sans-serif'
            }
        },
        xAxis: {
            categories: ['Prices ($)'],
            labels:{
                style: {
                      fontSize:'20px'
            }
          },
            lineColor: 'transparent',
            lineWidth: 0,
            gridLineWidth: 0,
           minorGridLineWidth: 0,
           lineColor: 'transparent'
        },
        yAxis: {
            title: {
                text: '',
                style: {
                          color: Highcharts.getOptions().colors[1],
                          fontSize:'16px',
                          font: '16pt Trebuchet MS, Verdana, sans-serif'
                        }
            },
            labels: {
                //   style: {
                //     color: Highcharts.getOptions().colors[1],
                //     fontSize:'15px'
                //   }
                enabled: false
              },
            // max: {{max_num}},
            // min: {{min_num}},
            max: 30000,
            min: 0,
            lineWidth: 0,
            gridLineWidth: 0,
            minorGridLineWidth: 0,
           lineColor: 'transparent'
        }, plotOptions: {
            series: {
                dataLabels: {
                    enabled: true,
                    align: 'right',
                    color: '#FFFFFF',
                    x: -10,
                    style: {
                        fontSize:'15px'
                    }
                },
                // pointPadding: 0.1,
                groupPadding: 0
            },

        },
        series: [{
            name: 'Listed Price',
            data: [{{price}}],
            color: "{{color}}"
        }, {
            name: 'DealWheels Price',
            data: [{{pred}}],
            color: "#616161"
        }],
        legend: {
              itemStyle: {
                 fontSize:'16px',
                 font: '16pt Trebuchet MS, Verdana, sans-serif',
                 color: '#616161'
              },
              itemHiddenStyle: {
                 color: '#444'
              }
        }
       });
    });

    // function (chart) { // on complete
    //
    //     chart.renderer.text("HELO", 19000, 50)
    //         .attr({
    //             rotation: 0
    //         })
    //         .css({
    //             color: "#616161",
    //             fontSize: '20px'
    //         })
    //         .add();}


    </script>
  </body>
</html>
